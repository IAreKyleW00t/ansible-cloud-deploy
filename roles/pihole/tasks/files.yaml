# Called from mail.yaml, using include_tasks
---
- name: Ensure Pi-Hole and other data directories exists
  block:
    - name: Ensure pihole, unbound, and dnsmasq config directories exists
      ansible.builtin.file:
        path: "{{ item }}"
        state: directory
        owner: root
        group: root
        mode: "0755"
      loop:
        - /etc/pihole
        - /etc/unbound/unbound.conf.d
        - /etc/dnsmasq.d/

    - name: Ensure unbound anchor directories exists
      ansible.builtin.file:
        path: /var/lib/unbound
        state: directory
        owner: unbound
        group: unbound
        mode: "0755"
  become: yes
  tags:
    - files
    - pihole
